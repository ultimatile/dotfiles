customCommands:
  - key: "J"
    prompts:
      - type: "menuFromCommand"
        title: "PRを選択:"
        key: "PRNumber"
        command: "gh pr list -d=false"
        filter: "^(?P<number>\\d+)\\t(?P<title>[^\\t]*)\\t"
        valueFormat: '{{ .number }} "{{ .title }}"'
        labelFormat: "#{{ .number }} {{ .title | green }}"
      - type: "menu"
        title: "チェックアウト方法を選択:"
        key: "CheckoutType"
        options:
          - name: "通常チェックアウト"
            description: "gh pr checkoutでブランチとしてチェックアウト"
            value: "通常チェックアウト"
          - name: "追跡ブランチ付きワークツリー"
            description: "ワークツリーとして追跡ブランチ付きでチェックアウト"
            value: "追跡ブランチ付きワークツリーでチェックアウト"
          - name: "デタッチドワークツリー"
            description: "ワークツリーとしてデタッチドHEADでチェックアウト"
            value: "デタッチドワークツリーでチェックアウト"
      - type: "confirm"
        title: "実行確認"
        body: "PR #{{.Form.PRNumber}}を{{.Form.CheckoutType}}しますか？"
    command: "$HOME/dotfiles/lazygit/pr-checkout-with-confirm.sh {{.Form.PRNumber | quote}} {{.Form.CheckoutType | quote}}"
    context: "global"
    loadingText: "PRをチェックアウト中"
    description: "PRをメニューから選択してチェックアウト"
    output: log
  - key: "K"
    prompts:
      - type: "input"
        title: "PR番号を入力:"
        key: "PRNumber"
      - type: "menu"
        title: "チェックアウト方法を選択:"
        key: "CheckoutType"
        options:
          - name: "通常チェックアウト"
            description: "gh pr checkoutでブランチとしてチェックアウト"
            value: "通常チェックアウト"
          - name: "追跡ブランチ付きワークツリー"
            description: "ワークツリーとして追跡ブランチ付きでチェックアウト"
            value: "追跡ブランチ付きワークツリーでチェックアウト"
          - name: "デタッチドワークツリー"
            description: "ワークツリーとしてデタッチドHEADでチェックアウト"
            value: "デタッチドワークツリーでチェックアウト"
      - type: "confirm"
        title: "実行確認"
        body: "PR #{{.Form.PRNumber}}を{{.Form.CheckoutType}}しますか？"
    command: "$HOME/dotfiles/lazygit/pr-checkout-with-confirm.sh {{.Form.PRNumber | quote}} {{.Form.CheckoutType | quote}}"
    context: "global"
    loadingText: "PRをチェックアウト中"
    description: "PR番号を指定してチェックアウト"
    output: log
  - key: "y"
    #TODO: currently once "gh repo set-default owner/repo" command is necessary. To be fixed.
    command: "gh repo sync"
    context: "localBranches"
    loadingText: "syncing upstream branch"
    description: "フォークをupstreamに同期"
  - key: "Y"
    context: "commits"
    command: "printf {{.SelectedCommit.Hash}} | head -c7 | pbcopy"
    description: "ショートコミットハッシュをクリップボードにコピー"
  - key: "W"
    command: "$HOME/dotfiles/lazygit/remote-checkout-as-worktree.sh {{.SelectedRemoteBranch.RemoteName}} {{.SelectedRemoteBranch.Name}}"
    context: "remoteBranches"
    loadingText: "checking out remote branch as worktree"
    description: "リモートブランチをワークツリーとしてチェックアウト"
    output: log
  - key: "U"
    command: "$HOME/dotfiles/lazygit/set-upstream-url.sh"
    description: "親レポジトリをリモートupstreamに設定"
    context: "global"
    loadingText: "adding upstream repository URL"
    output: log
